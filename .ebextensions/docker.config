option_settings:
  - namespace: aws:elasticbeanstalk:command
    option_name: Timeout
    value: 1200

commands:
  docker_clean_containers:
    command: docker rm -v $(docker ps -a -q)
    ignoreErrors: true
  docker_clean_images:
    command: docker rmi $(docker images -q)
    ignoreErrors: true
  docker_provision:
    command: docker exec -t $(docker ps -a -q --filter="name=app") sh -c "chmod 777 /var/www/html/deploy/provision.sh && /var/www/html/deploy/provision.sh"
    ignoreErrors: false
